# -----------------------------------------------
# Path setup
# -----------------------------------------------
IP_ROOT := ..

# -----------------------------------------------
# IP config
# -----------------------------------------------
include $(IP_ROOT)/config.mk

# -----------------------------------------------
# Regmap YAML sources
#   List regio yaml block and decoder specification sources.
#   RTL is autogenerated for all yaml files listed.
# -----------------------------------------------
REG_BLOCK_YAML = smartnic_322mhz.yaml
REG_DECODER_YAML = smartnic_322mhz_app_decoder.yaml \
                   smartnic_322mhz_app_sdnet_decoder.yaml \
                   xilinx_hbm_0_decoder.yaml \
                   xilinx_hbm_1_decoder.yaml \
                   smartnic_322mhz_decoder.yaml

# ----------------------------------------------------
# Options
# ----------------------------------------------------
REGIO_ELABORATE_OPTS :=
REGIO_GENERATE_OPTS :=

# ----------------------------------------------------
# Targets
# ----------------------------------------------------
all: compile

reg: _reg | smartnic_322mhz_app_decoder.yaml

compile: _compile

clean: _clean
	@rm -f smartnic_322mhz_app_decoder.yaml

.PHONY: all reg compile clean

smartnic_322mhz_app_decoder.yaml:
	@cp $(IP_ROOT)/app_if/smartnic_322mhz_app_decoder.yaml ./

# -----------------------------------------------
# Include regio targets
# -----------------------------------------------
include $(SCRIPTS_ROOT)/Makefiles/regio.mk
